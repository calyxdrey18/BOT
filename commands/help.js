const settings = require('../settings');
const fs = require('fs');
const path = require('path');

async function helpCommand(sock, chatId, channelLink) {
    const helpMessage = `
╔═══════════════════╗
   *🤖 ${settings.botName || 'Calyx-MD'}*  
   Version: *${settings.version || '1.0.0'}*
   by ${settings.botOwner || 'CALYX DREY'}
   YT : ${global.ytch}
╚═══════════════════╝

*𝙰𝚟𝚊𝚒𝚕𝚊𝚋𝚕𝚎 𝙲𝚘𝚖𝚖𝚊𝚗𝚍𝚜:*

╔═════════════════════╗
║★╭──────────────────╮
║★│➽𝚑𝚝𝚝𝚙𝚜://𝚝.𝚖𝚎/𝚑𝚊𝚡𝚔_𝚎𝚖
║★╰──────────────────╯
║★╭──────────────────╮
║★│➽𝚢𝚘𝚞𝚝𝚞𝚋𝚎.𝚌𝚘𝚖/@𝙲𝚊𝚕𝚢𝚡𝙳𝚛𝚎𝚢 
║★╰──────────────────╯
╚═════════════════════╝

╔═════════════════════╗
║★╭──────────────────╮
║★│➽𝙿𝚘𝚠𝚎𝚛𝚎𝚍 𝙱𝚢 𝙲𝚊𝚕𝚢𝚡-𝙳𝚛𝚎𝚢 
║★╰──────────────────╯
║★╭──────────────────╮   
║★│🤖 *𝙰𝙸 𝙲𝚘𝚖𝚖𝚊𝚗𝚍𝚜*:
║★╰──────────────────╯
║★╭──────────────────╮      
║★│ ➽ .𝚐𝚙𝚝 <𝚚𝚞𝚎𝚜𝚝𝚒𝚘𝚗>
║★│ ➽ .𝚐𝚎𝚖𝚒𝚗𝚒 <𝚚𝚞𝚎𝚜𝚝𝚒𝚘𝚗>
║★╰──────────────────╯    
╚═════════════════════╝

╔═════════════════════╗
║★╭──────────────────╮
║★│➽𝙿𝚘𝚠𝚎𝚛𝚎𝚍 𝙱𝚢 𝙲𝚊𝚕𝚢𝚡-𝙳𝚛𝚎𝚢 
║★╰──────────────────╯
║★╭──────────────────╮   
║★│⚡ *𝙿𝚛𝚎𝚖𝚒𝚞𝚖 𝙲𝚘𝚖𝚖𝚊𝚗𝚍𝚜*: 
║★╰──────────────────╯
║★╭──────────────────╮      
║★│ ➽ .𝚖𝚘𝚍𝚎
║★│ ➽ .𝚊𝚞𝚝𝚘𝚜𝚝𝚊𝚝𝚞𝚜
║★│ ➽ .𝚌𝚕𝚎𝚊𝚛𝚜𝚎𝚜𝚜𝚒𝚘𝚗
║★│ ➽ .𝚊𝚗𝚝𝚒𝚍𝚎𝚕𝚎𝚝𝚎
║★│ ➽ .𝚌𝚕𝚎𝚊𝚛𝚝𝚖𝚙
║★│ ➽ .𝚜𝚎𝚝𝚙𝚙
║★│ ➽ .𝚊𝚞𝚝𝚘𝚛𝚎𝚊𝚌𝚝
║★╰──────────────────╯
╚═════════════════════╝

╔═════════════════════╗
║★╭──────────────────╮
║★│➽𝙿𝚘𝚠𝚎𝚛𝚎𝚍 𝙱𝚢 𝙲𝚊𝚕𝚢𝚡-𝙳𝚛𝚎𝚢 
║★╰──────────────────╯
║★╭──────────────────╮    
║★│📥 *𝙳𝚘𝚠𝚗𝚕𝚘𝚊𝚍 𝙲𝚘𝚖𝚖𝚊𝚗𝚍𝚜*:
║★╰──────────────────╯
║★╭──────────────────╮     
║★│ ➽ .𝚙𝚕𝚊𝚢 <𝚜𝚘𝚗𝚐_𝚗𝚊𝚖𝚎>
║★│ ➽ .𝚜𝚘𝚗𝚐 <𝚜𝚘𝚗𝚐_𝚗𝚊𝚖𝚎>
║★│ ➽ .𝚒𝚗𝚜𝚝𝚊𝚐𝚛𝚊𝚖 <𝚕𝚒𝚗𝚔>
║★│ ➽ .𝚏𝚊𝚌𝚎𝚋𝚘𝚘𝚔 <𝚕𝚒𝚗𝚔>
║★│ ➽ .𝚝𝚒𝚔𝚝𝚘𝚔 <𝚕𝚒𝚗𝚔>
║★╰──────────────────╯    
╚═════════════════════╝

╔═════════════════════╗
║★╭──────────────────╮
║★│➽𝙿𝚘𝚠𝚎𝚛𝚎𝚍 𝙱𝚢 𝙲𝚊𝚕𝚢𝚡-𝙳𝚛𝚎𝚢 
║★╰──────────────────╯
║★╭──────────────────╮    
║★│🌐 *𝙶𝚎𝚗𝚎𝚛𝚊𝚕 𝙲𝚘𝚖𝚖𝚊𝚗𝚍𝚜*:
║★╰──────────────────╯
║★╭──────────────────╮    
║★│ ➽ .𝚖𝚎𝚗𝚞
║★│ ➽ .𝚙𝚒𝚗𝚐
║★│ ➽ .𝚊𝚕𝚒𝚟𝚎
║★│ ➽ .𝚝𝚝𝚜 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚘𝚠𝚗𝚎𝚛
║★│ ➽ .𝚓𝚘𝚔𝚎
║★│ ➽ .𝚚𝚞𝚘𝚝𝚎
║★│ ➽ .𝚏𝚊𝚌𝚝
║★│ ➽ .𝚠𝚎𝚊𝚝𝚑𝚎𝚛 <𝚌𝚒𝚝𝚢>
║★│ ➽ .𝚗𝚎𝚠𝚜
║★│ ➽ .𝚊𝚝𝚝𝚙 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚕𝚢𝚛𝚒𝚌𝚜 <𝚜𝚘𝚗𝚐_𝚝𝚒𝚝𝚕𝚎>
║★│ ➽ .8𝚋𝚊𝚕𝚕 <𝚚𝚞𝚎𝚜𝚝𝚒𝚘𝚗>
║★│ ➽ .𝚐𝚛𝚘𝚞𝚙𝚒𝚗𝚏𝚘
║★│ ➽ .𝚜𝚝𝚊𝚏𝚏
║★│ ➽ .𝚟𝚟 
║★│ ➽ .𝚙𝚊𝚒𝚛
║★│ ➽ .𝚝𝚛𝚝 <𝚝𝚎𝚡𝚝> <𝚕𝚊𝚗𝚐>
║★│➽ .𝚜𝚜 <𝚕𝚒𝚗𝚔>
║★╰──────────────────╯   
╚═════════════════════╝ 

╔═════════════════════╗
║★╭──────────────────╮
║★│➽𝙿𝚘𝚠𝚎𝚛𝚎𝚍 𝙱𝚢 𝙲𝚊𝚕𝚢𝚡-𝙳𝚛𝚎𝚢 
║★╰──────────────────╯
║★╭──────────────────╮   
║★│👥️ *𝙶𝚛𝚘𝚞𝚙 𝙲𝚘𝚖𝚖𝚊𝚗𝚍𝚜*:
║★╰──────────────────╯
║★╭──────────────────╮      
║★│ ➽ .𝚋𝚊𝚗 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚙𝚛𝚘𝚖𝚘𝚝𝚎 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚍𝚎𝚖𝚘𝚝𝚎 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚖𝚞𝚝𝚎 <𝚖𝚒𝚗𝚞𝚝𝚎𝚜>
║★│ ➽ .𝚞𝚗𝚖𝚞𝚝𝚎
║★│ ➽ .𝚍𝚎𝚕
║★│ ➽ .𝚔𝚒𝚌𝚔 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚠𝚊𝚛𝚗𝚒𝚗𝚐𝚜 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚠𝚊𝚛𝚗 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚊𝚗𝚝𝚒𝚕𝚒𝚗𝚔
║★│ ➽ .𝚊𝚗𝚝𝚒𝚋𝚊𝚍𝚠𝚘𝚛𝚍
║★│ ➽ .𝚌𝚕𝚎𝚊𝚛
║★│ ➽ .𝚝𝚊𝚐 <𝚖𝚎𝚜𝚜𝚊𝚐𝚎>
║★│ ➽ .𝚝𝚊𝚐𝚊𝚕𝚕
║★│ ➽ .𝚌𝚑𝚊𝚝𝚋𝚘𝚝
║★│ ➽ .𝚛𝚎𝚜𝚎𝚝𝚕𝚒𝚗𝚔
║★╰──────────────────╯    
╚═════════════════════╝

╔═════════════════════╗
║★╭──────────────────╮
║★│➽𝙿𝚘𝚠𝚎𝚛𝚎𝚍 𝙱𝚢 𝙲𝚊𝚕𝚢𝚡-𝙳𝚛𝚎𝚢 
║★╰──────────────────╯
║★╭──────────────────╮  
║★│🏞 *𝙸𝚖𝚊𝚐𝚎 𝙲𝚘𝚖𝚖𝚊𝚗𝚍𝚜*:
║★╰──────────────────╯
║★╭──────────────────╮      
║★│ ➽ .𝚋𝚕𝚞𝚛 <𝚒𝚖𝚊𝚐𝚎>
║★│ ➽ .𝚜𝚒𝚖𝚊𝚐𝚎 <𝚜𝚝𝚒𝚌𝚔𝚎𝚛>
║★│ ➽ .𝚜𝚝𝚒𝚌𝚔𝚎𝚛 <𝚜𝚝𝚒𝚌𝚔𝚎𝚛>
║★│ ➽ .𝚝𝚐𝚜𝚝𝚒𝚌𝚔𝚎𝚛 <𝙻𝚒𝚗𝚔>
║★│ ➽ .𝚖𝚎𝚖𝚎
║★│ ➽ .𝚝𝚊𝚔𝚎 <𝚙𝚊𝚌𝚔𝚗𝚊𝚖𝚎> 
║★│ ➽ .𝚎𝚖𝚘𝚓𝚒𝚖𝚒𝚡 <1>+<2>
║★╰──────────────────╯    
╚═════════════════════╝  

╔═════════════════════╗
║★╭──────────────────╮
║★│➽𝙿𝚘𝚠𝚎𝚛𝚎𝚍 𝙱𝚢 𝙲𝚊𝚕𝚢𝚡-𝙳𝚛𝚎𝚢 
║★╰──────────────────╯
║★╭──────────────────╮
║★│🎮 *𝙶𝚊𝚖𝚎 𝙲𝚘𝚖𝚖𝚊𝚗𝚍𝚜*:
║★╰──────────────────╯
║★╭──────────────────╮      
║★│ ➽ .𝚝𝚒𝚌𝚝𝚊𝚌𝚝𝚘𝚎 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚑𝚊𝚗𝚐𝚖𝚊𝚗
║★│ ➽ .𝚐𝚞𝚎𝚜𝚜 <𝚕𝚎𝚝𝚝𝚎𝚛>
║★│ ➽ .𝚝𝚛𝚒𝚟𝚒𝚊
║★│ ➽ .𝚊𝚗𝚜𝚠𝚎𝚛 <𝚊𝚗𝚜𝚠𝚎𝚛>
║★│ ➽ .𝚝𝚛𝚞𝚝𝚑
║★│ ➽ .𝚍𝚊𝚛𝚎
║★╰──────────────────╯  
╚═════════════════════╝

╔═════════════════════╗
║★╭──────────────────╮
║★│➽𝙿𝚘𝚠𝚎𝚛𝚎𝚍 𝙱𝚢 𝙲𝚊𝚕𝚢𝚡-𝙳𝚛𝚎𝚢 
║★╰──────────────────╯
║★╭──────────────────╮    
║★│🎡*𝙵𝚞𝚗 𝙲𝚘𝚖𝚖𝚊𝚗𝚍𝚜*:
║★╰──────────────────╯
║★╭──────────────────╮     
║★│ ➽ .𝚌𝚘𝚖𝚙𝚕𝚒𝚖𝚎𝚗𝚝 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚒𝚗𝚜𝚞𝚕𝚝 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚏𝚕𝚒𝚛𝚝 
║★│ ➽ .𝚜𝚑𝚊𝚢𝚊𝚛𝚒
║★│ ➽ .𝚐𝚘𝚘𝚍𝚗𝚒𝚐𝚑𝚝
║★│ ➽ .𝚛𝚘𝚜𝚎𝚍𝚊𝚢
║★│ ➽ .𝚌𝚑𝚊𝚛𝚊𝚌𝚝𝚎𝚛 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚠𝚊𝚜𝚝𝚎𝚍 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚜𝚑𝚒𝚙 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚜𝚒𝚖𝚙 @𝚞𝚜𝚎𝚛
║★│ ➽ .𝚜𝚝𝚞𝚙𝚒𝚍 @𝚞𝚜𝚎𝚛 [𝚝𝚎𝚡𝚝]
║★╰──────────────────╯  
╚═════════════════════╝

╔═════════════════════╗
║★╭──────────────────╮
║★│➽𝙿𝚘𝚠𝚎𝚛𝚎𝚍 𝙱𝚢 𝙲𝚊𝚕𝚢𝚡-𝙳𝚛𝚎𝚢 
║★╰──────────────────╯
║★╭──────────────────╮   
║★│🔤 *𝚃𝚎𝚡𝚝 𝙴𝚍𝚒𝚝𝚘𝚛*:
║★╰──────────────────╯
║★╭──────────────────╮     
║★│ ➽ .𝚖𝚎𝚝𝚊𝚕𝚕𝚒𝚌 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚒𝚌𝚎 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚜𝚗𝚘𝚠 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚒𝚖𝚙𝚛𝚎𝚜𝚜𝚒𝚟𝚎 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚖𝚊𝚝𝚛𝚒𝚡 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚕𝚒𝚐𝚑𝚝 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚗𝚎𝚘𝚗 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚍𝚎𝚟𝚒𝚕 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚙𝚞𝚛𝚙𝚕𝚎 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚝𝚑𝚞𝚗𝚍𝚎𝚛 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚕𝚎𝚊𝚟𝚎𝚜 <𝚝𝚎𝚡𝚝>
║★│ ➽ .1917 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚊𝚛𝚎𝚗𝚊 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚑𝚊𝚌𝚔𝚎𝚛 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚜𝚊𝚗𝚍 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚋𝚕𝚊𝚌𝚔𝚙𝚒𝚗𝚔 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚐𝚕𝚒𝚝𝚌𝚑 <𝚝𝚎𝚡𝚝>
║★│ ➽ .𝚏𝚒𝚛𝚎 <𝚝𝚎𝚡𝚝>
║★╰──────────────────╯    
╚═════════════════════╝

╔═════════════════════╗
║★╭──────────────────╮
║★│➽𝙿𝚘𝚠𝚎𝚛𝚎𝚍 𝙱𝚢 𝙲𝚊𝚕𝚢𝚡-𝙳𝚛𝚎𝚢 
║★╰──────────────────╯
║★╭──────────────────╮   
║★│💻 *𝚂𝚛𝚌 𝙲𝚘𝚍𝚎 𝙲𝚘𝚖𝚖𝚊𝚗𝚍𝚜:*
║★╰──────────────────╯
║★╭──────────────────╮      
║★│ ➽ .𝚐𝚒𝚝
║★│ ➽ .𝚐𝚒𝚝𝚑𝚞𝚋
║★│ ➽ .𝚜𝚌
║★│ ➽ .𝚜𝚌𝚛𝚒𝚙𝚝
║★│ ➽ .𝚛𝚎𝚙𝚘
║★╰──────────────────╯   
╚═════════════════════╝
𝙹𝚘𝚒𝚗 𝚘𝚞𝚛 𝚌𝚑𝚊𝚗𝚗𝚎𝚕 𝚏𝚘𝚛 𝚍𝚊𝚒𝚕𝚢 𝚞𝚙𝚍𝚊𝚝𝚎𝚜:

> 𝙿𝚘𝚠𝚎𝚛𝚎𝚍 𝙱𝚢 𝙲𝚊𝚕𝚢𝚡-𝙳𝚛𝚎𝚢`;

    try {
        const imagePath = path.join(__dirname, '../assets/bot_image.jpg');
        
        if (fs.existsSync(imagePath)) {
            const imageBuffer = fs.readFileSync(imagePath);
            
            await sock.sendMessage(chatId, {
                image: imageBuffer,
                caption: helpMessage,
                contextInfo: {
                    forwardingScore: 1,
                    isForwarded: true,
                    forwardedNewsletterMessageInfo: {
                        newsletterJid: '120363301940507195@newsletter',
                        newsletterName: 'Calyx-MD Command List',
                        serverMessageId: -1
                    }
                }
            });
        } else {
            console.error('Bot image not found at:', imagePath);
            await sock.sendMessage(chatId, { 
                text: helpMessage,
                contextInfo: {
                    forwardingScore: 1,
                    isForwarded: true,
                    forwardedNewsletterMessageInfo: {
                        newsletterJid: '120363301940507195@newsletter',
                        newsletterName: 'Calyx-MD Command List',
                        serverMessageId: -1
                    } 
                }
            });
        }
    } catch (error) {
        console.error('Error in help command:', error);
        await sock.sendMessage(chatId, { text: helpMessage });
    }
}

module.exports = helpCommand;
